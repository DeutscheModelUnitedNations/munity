


<div *ngIf="!conference">
  <p>Konferenz wird geladen</p>
</div>

<div *ngIf="conference">
  <div class="row">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item">Konferenzverwaltung</li>
        <li class="breadcrumb-item"><a [routerLink]="['/mc/overview',conference.ID]" *ngIf="conference">{{ conference.Name }}</a></li>
        <li class="breadcrumb-item active" aria-current="page">Gremien</li>
      </ol>
    </nav>
  </div>

  <div class="row">
    <h1>Gremien verwalten</h1>
  </div>

  <!-- Übersicht -->
  <div class="row">
    <div class="card border-dark w-100">
      <div class="card-header">Gremien</div>
      <div class="card-body text-dark">
        <h5 class="card-title">Gremien</h5>

        <p class="card-text">{{ conference.Committees.length }} Gremien gefunden.</p>
        <table class="table">
          <thead>
            <tr>
              <th>Name </th>
              <th>Delegationen </th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let committee of conference.Committees">
              <td>{{ committee.Name}}</td>
              <td>{{ committee.DelegationList.length }}</td>
            </tr>
          </tbody>
        </table>

      </div>
      <div class="card-footer">
        <button type="button" class="btn btn-block btn-primary" (click)="openModal(addCommitteeModal)">Gremium hinzufügen</button>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-12">
      <div class="card border-primary">
        <div class="card-header">
          <h3 class="card-title">Delegation zur Konferenz hinzufügen</h3>
        </div>
        <div class="card-body">
          <div class="form-group">
            <label>Delegation auswählen</label>
            <select class="form-control" [(ngModel)]="addDelegationSelection" [ngModelOptions]="{standalone: true}">
              <option *ngFor="let delegation of presetDelegations" [ngValue]="delegation">{{ delegation.Name }}</option>
            </select>
          </div>
          <div class="form-group">
            <button class="btn btn-block btn-primary" (click)="addDelegationClick()">Auswahl Hinzufügen</button>
          </div>
        </div>
      </div>
    </div>

  </div>
  <div class="row">
    <div class="col-12">
      <label>Suche: </label>
      <input type="text" class="form-control" placeholder="Suchbegriff" (keyup)="onSearchKey($event)" />
    </div>
    <div class="col-12">
      <table class="table table-hover">
        <tr>
          <th>Delegation\Gremium</th>
          <th *ngFor="let committee of conference.Committees" class="text-center">{{ committee.Abbreviation }}</th>
        </tr>
        <tr *ngFor="let delegation of filteredDelegations">
          <td>{{ delegation.Name }}</td>
          <td *ngFor="let committee of conference.Committees" [class.bg-success]="isDelegationInCommittee(delegation, committee)">
            <div class="checkbox" class="align-content-center">
              <label style="font-size: 1em">
                  <input type="checkbox" value="" [checked]="isDelegationInCommittee(delegation, committee)" (change)="toggleDelegationInCommittee(delegation, committee)">
              </label>
            </div>
          </td>
        </tr>
      </table>
    </div>

  </div>

</div>


<!-- Add Committee Modal -->
<ng-template #addCommitteeModal>
  <div class="modal-header">
    <h4 class="modal-title pull-left">Modal</h4>
    <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <!-- Name -->
    <div class="row">
      <label class="control-label">Anzeigename</label>
      <div class="col-12">
        <input [(ngModel)]="newcommitteename"
               class="form-control"
               [ngModelOptions]="{standalone: true}">
      </div>
    </div>

    <!-- Abkürzung -->
    <div class="row">
      <label class="control-label">Abkürzung/Kurzform</label>
      <div class="col-12">
        <input [(ngModel)]="newcommitteeabbreviation"
               class="form-control"
               [ngModelOptions]="{standalone: true}">
      </div>
    </div>

    <!-- Abkürzung -->
    <div class="row">
      <label class="control-label">Artikel (der/die/das)</label>
      <div class="col-12">
        <input [(ngModel)]="newcommitteearticle"
               class="form-control"
               [ngModelOptions]="{standalone: true}">
      </div>
    </div>

    <!-- Übergeordnetes Gremium -->
    <div class="row">
      <label class="control-label">Übergeodnetes Gremium</label>
      <div class="col-12">
        <input [(ngModel)]="newcommitteeparent"
               [typeahead]="conference.Committees"
               typeaheadOptionField="Name"
               class="form-control"
               [ngModelOptions]="{standalone: true}"
               aria-describedby="dsds">
        <small id="dsds" class="text-muted">Wenn keines existiert Feld leer lassen</small>
      </div>
    </div>

    <div class="row">
      <button class="btn btn-block btn-primary" (click)="addCommittee()">Hinzufügen</button>
    </div>
  </div>
</ng-template>
