@using MUNity.Extensions.ResolutionExtensions;


@if (Paragraph != null && Resolution != null)
{
    @if (deleteAmendmentCount > 0)
    {
        <span class="badge badge-danger">@deleteAmendmentCount Anträge auf streichen</span>
    }


    @if (changeAmendmentCount > 0)
    {
        <span class="badge badge-primary">@changeAmendmentCount Anträge auf Textänderung</span>
    }

    <p>@Resolution.OperativeSection.GetIndexNameOfOperativeParagraph(Paragraph) @Paragraph.Text</p>
}

@code {
    [Parameter]
    public MUNity.Models.Resolution.OperativeParagraph Paragraph { get; set; }

    [Parameter]
    public MUNity.Models.Resolution.Resolution Resolution { get; set; }

    private int deleteAmendmentCount = 0;

    private int changeAmendmentCount = 0;

    protected override void OnInitialized()
    {
        if (Paragraph != null && Resolution != null)
        {
            deleteAmendmentCount = Resolution.OperativeSection.DeleteAmendments.Count(n => n.TargetSectionId == Paragraph.OperativeParagraphId);
            changeAmendmentCount = Resolution.OperativeSection.ChangeAmendments.Count(n => n.TargetSectionId == Paragraph.OperativeParagraphId);
        }
        //base.OnInitialized();
    }
}
